angular.module("ng-currency",[]).directive("ngCurrency",["$filter","$locale",function(n,e){return{require:"ngModel",scope:{min:"=min",max:"=max",currencySymbol:"@",ngRequired:"=ngRequired"},link:function(r,t,u,i){function a(n){return n="(\\"+n+"|\\.\\d{1,}$)",RegExp("\\d|\\-|"+n,"g")}function c(n){return n="(\\"+n+"|\\.\\d{1,}$)",RegExp("\\-{0,1}(("+n+")|([0-9]{1,}"+n+"?))&?[0-9]{0,2}","g")}function o(n){n=String(n);var r=e.NUMBER_FORMATS.DECIMAL_SEP,t=null;return RegExp("^-[\\s]*$","g").test(n)&&(n="-0"),a(r).test(n)&&(t=n.match(a(r)).join("").match(c(r)),t=t?t[0].replace(r,"."):null),t}function l(){return angular.isDefined(r.currencySymbol)?r.currencySymbol:e.NUMBER_FORMATS.CURRENCY_SYM}function f(n){if(!isNaN(n)){if("undefined"!=typeof r.min){var e=parseFloat(r.min);i.$setValidity("min",n>=e)}if("undefined"!=typeof r.max){var t=parseFloat(r.max);i.$setValidity("max",t>=n)}}}i.$parsers.push(function(n){var e=o(n);return parseFloat(e)}),t.on("blur",function(){t.val(n("currency")(i.$modelValue,l()))}),i.$formatters.unshift(function(e){return n("currency")(e,l())}),r.$watch(function(){return i.$modelValue},function(n,e){f(n)})}}}]);